<div>
  <h1 class="display-3 text-center">Sign up</h1>
  <div *ngIf="showSpinner">
    <loading-spinner></loading-spinner>
  </div>
  <hr>
  <p class="mt-3">Fields with * are required!</p>
  <form class="form-group" [formGroup]=registerForm (ngSubmit)="submitRegisterForm()">

    <div class="form-group">
      <label>
        <strong>Username</strong>*
      </label>
      <input class="form-control" type="text" formControlName="username" placeholder="John" />
      <div class="alert alert-danger" *ngIf="username.invalid && (username.dirty || username.touched)">
        <div *ngIf="username.errors['required']">Username is required</div>
        <div *ngIf="username.errors['minlength']">Username should be atleast 3 symbols long</div>
        <div *ngIf="username.errors['uniqueUsername']">Username is already taken</div>
      </div>

    </div>

    <div class="form-group">
      <label>
        <strong>Email</strong>*
      </label>
      <input class="form-control" type="text" formControlName="email" placeholder="john_smith@gmail.com" />
      <div class="alert alert-danger" *ngIf="email.invalid && (email.dirty || email.touched)">
        <div *ngIf="email.errors['required']">Email is required</div>
        <div *ngIf="email.errors['pattern']">Enter valid email</div>
      </div>
    </div>

    <div class="form-group">
      <label>
        <strong>Confirm Email</strong>*
      </label>
      <input class="form-control" type="text" formControlName="confirmEmail" placeholder="john_smith@gmail.com" />
      <div class="alert alert-danger" *ngIf="confirmEmail.invalid && (confirmEmail.dirty || confirmEmail.touched)">
        <div *ngIf="confirmEmail.errors['required']">Confirm email is required</div>
        <div *ngIf="confirmEmail.errors['compare']">Confirm email do not match</div>
      </div>
    </div>

    <div class="form-group">
      <label>
        <strong>Password</strong>*
      </label>
      <input class="form-control" type="password" formControlName="password" placeholder="s3cr37" />
      <div class="alert alert-danger" *ngIf="password.invalid && (password.dirty || password.touched)">
        <div *ngIf="password.errors['required']">Password is required</div>
        <div *ngIf="password.errors['minlength']">Password should be atleast 3 symbols long</div>
      </div>
    </div>

    <div class="form-group">
      <label>
        <strong>Confirm Password</strong>*
      </label>
      <input class="form-control" type="password" formControlName="confirmPassword" placeholder="s3cr37" />
      <div class="alert alert-danger" *ngIf="confirmPassword.invalid && (confirmPassword.dirty || confirmPassword.touched)">
        <div *ngIf="confirmPassword.errors['required']">Confirm password is required</div>
        <div *ngIf="confirmPassword.errors['compare']">Confirm password do not match</div>
      </div>
    </div>

    <div class="form-group">
      <label>
        <strong>Age</strong>*
      </label>
      <input class="form-control" type="number" formControlName="age" placeholder="12" />
      <div class="alert alert-danger" *ngIf="age.invalid && (age.dirty || age.touched)">
        <div *ngIf="age.errors['required']">Age is required</div>
        <div *ngIf="age.errors['min']">Age should be over 12</div>
      </div>
    </div>

    <h3>Country</h3>

    <div class="form-group" class="row" formGroupName="countryData">
      <div class="col-md-3">
        <label>
          <strong>Country / Region</strong>*
        </label>
        <input type="text" class="form-control" formControlName="country" placeholder="Bulgaria" />
        <div class="alert alert-danger" *ngIf="country.invalid && (country.dirty || country.touched)">
          Country is required.
        </div>
      </div>

      <div class="col-md-3">
        <label>
          <strong>City</strong>*
        </label>
        <input type="text" class="form-control" formControlName="city" placeholder="Sofia" />
        <div class="alert alert-danger" *ngIf="city.invalid && (city.dirty || city.touched)">
          City is required.
        </div>
      </div>

      <div class="col-md-3">
        <label>
          <strong>State / Province / Region</strong>*
        </label>
        <input type="text" class="form-control" formControlName="state" placeholder="Sofia" />
        <div class="alert alert-danger" *ngIf="state.invalid && (state.dirty || state.touched)">
          State is required.
        </div>
      </div>

      <div class="col-md-3">
        <label>
          <strong>Zip Code</strong>*
        </label>
        <input type="text" class="form-control" formControlName="zipcode" placeholder="1000" />
        <div class="alert alert-danger" *ngIf="zipcode.invalid && (zipcode.dirty || zipcode.touched)">
          Zip Code is required.
        </div>
      </div>
    </div>

    <h3 class="mt-2">Address</h3>

    <div formArrayName="streetAddress">
      <div *ngFor="let adress of streetAddress.controls; let i = index">
        <div [formGroupName]="i" class="row form-group">
          <div class="col-md-3">
            <label>
              <strong>Street</strong>*
            </label>
            <input type="text" class="form-control" formControlName="street" placeholder="Your street" />
            <div class="alert alert-danger" *ngIf="adress.controls.street.invalid && (adress.controls.street.dirty || adress.controls.street.touched)">
              Street is required.
            </div>
          </div>

          <div class="col-md-3">
            <label>
              <strong>Apartment N</strong>*
            </label>
            <input type="text" class="form-control" formControlName="apartament" placeholder="Apartament number 22" />
            <div class="alert alert-danger" *ngIf="adress.controls.apartament.invalid && (adress.controls.apartament.dirty || adress.controls.apartament.touched)">
              Apartment is required.
            </div>
          </div>

          <div class="col-md-3">
            <label>
              <strong>Phone number</strong>*
            </label>
            <input type="text" class="form-control" formControlName="phoneNumber" placeholder="0888 888 888" />
            <div class="alert alert-danger" *ngIf="adress.controls.phoneNumber.invalid && (adress.controls.phoneNumber.dirty || adress.controls.phoneNumber.touched)">
              Phone number is required.
            </div>
          </div>

          <button class="btn btn-danger col-md-3 w-75 fixButtonSize" (click)="deleteStreetAddress(i)">Delete</button>
        </div>
      </div>
    </div>
    <button type="button" class="btn btn-dark float-right mt-3 offset-11" (click)="addStreetAddress()">Add address</button>
    <hr>
    <button type="submit" [disabled]="registerForm.invalid" class="btn btn-primary offset-3 mt-3 col-md-6">Sign up</button>
  </form>
</div>